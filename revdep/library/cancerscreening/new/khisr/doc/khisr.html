<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Getting Started</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Getting Started</h1>



<p>The <code>khisr</code> package seamlessly integrates with the Kenya
Health Information System (KHIS) API from R, empowering researchers and
public health professionals to easily access and analyze valuable health
data. Built on the DHIS2 platform, khisr automates data retrieval,
saving you time and effort compared to manual methods.</p>
<div id="authentication" class="section level2">
<h2>Authentication</h2>
<p>To ensure a secure and seamless experience, <code>khisr</code>
operates by default in authenticated mode, enabling you to interact with
KHIS as a recognized user. This means that before diving into KHIS data
exploration, you’ll need to establish your credentials with the
system.</p>
<div id="setting-your-credentials" class="section level3">
<h3>Setting Your Credentials:</h3>
<ol style="list-style-type: decimal">
<li><p>Obtain your KHIS credentials: These typically consist of a
username and password, which you can acquire through appropriate
channels within the KHIS organization.</p></li>
<li><p>Store your credentials securely: khisr provides a convenient
mechanism for storing your credentials within your R environment. To
learn how to set and manage your credentials effectively, please refer
to the comprehensive guide at <a href="https://khisr.damurka.com/articles/set-your-credentials.html">Set
Your Credentials</a>.</p></li>
</ol>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co"># Set the credentials using username and password</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">khis_cred</span>(<span class="at">username =</span> <span class="st">&#39;KHIS username&#39;</span>, <span class="at">password =</span> <span class="st">&#39;KHIS password&#39;</span>)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="co"># Set credentials using configuration path</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="fu">khis_cred</span>(<span class="at">config_path =</span> <span class="st">&#39;path/to/secret.json&#39;</span>)</span></code></pre></div>
</div>
</div>
<div id="metadata" class="section level2">
<h2>Metadata</h2>
<p>KHIS uses metadata to define the structure and meaning of the data
stored in the system. For more information see <a href="https://khisr.damurka.com/articles/data-dimensions.html">data
dimensions</a></p>
<div id="metadata-helpers" class="section level3">
<h3>Metadata helpers</h3>
<p><code>khisr</code> provides a number of high level metadata helpers
for obtaining details of the different types of metadata. There is a
helper for each of the main metadata categories in DHIS2, in fact auto
complete in the users R IDE will often make typing these very fast. This
is the list of the numerous high level metadata helpers in
<code>khisr</code>.</p>
<table>
<thead>
<tr class="header">
<th align="left">khisr function</th>
<th align="left">KHIS API Endpoint</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>get_categories()</code></td>
<td align="left">categories</td>
</tr>
<tr class="even">
<td align="left"><code>get_category_combos()</code></td>
<td align="left">categoryCombos</td>
</tr>
<tr class="odd">
<td align="left"><code>get_category_option_combos()</code></td>
<td align="left">categoryOptionCombos</td>
</tr>
<tr class="even">
<td align="left"><code>get_category_option_group_sets()</code></td>
<td align="left">categoryOptionGroupSets</td>
</tr>
<tr class="odd">
<td align="left"><code>get_category_option_groups()</code></td>
<td align="left">categoryOptionGroups</td>
</tr>
<tr class="even">
<td align="left"><code>get_category_options()</code></td>
<td align="left">categoryOptions</td>
</tr>
<tr class="odd">
<td align="left"><code>get_data_element_group_sets()</code></td>
<td align="left">dataElementGroupSets</td>
</tr>
<tr class="even">
<td align="left"><code>get_data_element_groups()</code></td>
<td align="left">dataElementGroups</td>
</tr>
<tr class="odd">
<td align="left"><code>get_data_elements()</code></td>
<td align="left">dataElements</td>
</tr>
<tr class="even">
<td align="left"><code>get_data_sets()</code></td>
<td align="left">dataSets</td>
</tr>
<tr class="odd">
<td align="left"><code>get_indicator_group_sets()</code></td>
<td align="left">indicatorGroupSets</td>
</tr>
<tr class="even">
<td align="left"><code>get_indicator_groups()</code></td>
<td align="left">indicatorGroups</td>
</tr>
<tr class="odd">
<td align="left"><code>get_indicators()</code></td>
<td align="left">indicators</td>
</tr>
<tr class="even">
<td align="left"><code>get_option_group_sets()</code></td>
<td align="left">optionGroupSets</td>
</tr>
<tr class="odd">
<td align="left"><code>get_option_groups()</code></td>
<td align="left">optionGroups</td>
</tr>
<tr class="even">
<td align="left"><code>get_option_sets()</code></td>
<td align="left">optionSets</td>
</tr>
<tr class="odd">
<td align="left"><code>get_options()</code></td>
<td align="left">options</td>
</tr>
<tr class="even">
<td align="left"><code>get_organisation_unit_groupsets()</code></td>
<td align="left">organisationUnitGroupSets</td>
</tr>
<tr class="odd">
<td align="left"><code>get_organisation_unit_groups()</code></td>
<td align="left">organisationUnitGroups</td>
</tr>
<tr class="even">
<td align="left"><code>get_organisation_units()</code></td>
<td align="left">organisationUnits</td>
</tr>
<tr class="odd">
<td align="left"><code>get_dimensions()</code></td>
<td align="left">dimensions</td>
</tr>
<tr class="even">
<td align="left"><code>get_user_groups()</code></td>
<td align="left">userGroups</td>
</tr>
<tr class="odd">
<td align="left"><code>get_period_types()</code></td>
<td align="left">periodTypes</td>
</tr>
</tbody>
</table>
</div>
<div id="metadata-object-filter" class="section level3">
<h3>Metadata object filter</h3>
<p>To filter the metadata there are several filter operations that can
be applied to the returned list of metadata. The format of the filter
itself is straight-forward and follows the pattern
property:operator:value, where property is the property on the metadata
you want to filter on, operator is the comparison operator you want to
perform and value is the value to check against (not all operators
require value).</p>
<table>
<colgroup>
<col width="19%" />
<col width="19%" />
<col width="60%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">KHIS Operator</th>
<th align="left">Infix Operator</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>eq</code></td>
<td align="left"><code>%.eq%</code></td>
<td align="left">Equality</td>
</tr>
<tr class="even">
<td align="left"><code>!eq</code></td>
<td align="left"><code>%.~eq%</code></td>
<td align="left">Inequality</td>
</tr>
<tr class="odd">
<td align="left"><code>ieq</code></td>
<td align="left"><code>%.ieq%</code></td>
<td align="left">Case insensitive string, match exact</td>
</tr>
<tr class="even">
<td align="left"><code>ne</code></td>
<td align="left"><code>%.ne%</code></td>
<td align="left">Inequality</td>
</tr>
<tr class="odd">
<td align="left"><code>like</code></td>
<td align="left"><code>%.Like%</code></td>
<td align="left">Case sensitive string, match anywhere</td>
</tr>
<tr class="even">
<td align="left"><code>!like</code></td>
<td align="left"><code>%.~Like%</code></td>
<td align="left">Case sensitive string, not match anywhere</td>
</tr>
<tr class="odd">
<td align="left"><code>$like</code></td>
<td align="left"><code>%.^Like%</code></td>
<td align="left">Case sensitive string, match start</td>
</tr>
<tr class="even">
<td align="left"><code>!$like</code></td>
<td align="left"><code>%.~^Like%</code></td>
<td align="left">Case sensitive string, not match start</td>
</tr>
<tr class="odd">
<td align="left"><code>like$</code></td>
<td align="left"><code>%.Like$%</code></td>
<td align="left">Case sensitive string, match end</td>
</tr>
<tr class="even">
<td align="left"><code>!like$</code></td>
<td align="left"><code>%.~Like$%</code></td>
<td align="left">Case sensitive string, not match end</td>
</tr>
<tr class="odd">
<td align="left"><code>ilike</code></td>
<td align="left"><code>%.like%</code></td>
<td align="left">Case insensitive string, match anywhere</td>
</tr>
<tr class="even">
<td align="left"><code>!ilike</code></td>
<td align="left"><code>%.~like%</code></td>
<td align="left">Case insensitive string, not match anywhere</td>
</tr>
<tr class="odd">
<td align="left"><code>$ilike</code></td>
<td align="left"><code>%.^like%</code></td>
<td align="left">Case insensitive string, match start</td>
</tr>
<tr class="even">
<td align="left"><code>!$ilike</code></td>
<td align="left"><code>%.~^like%</code></td>
<td align="left">Case insensitive string, not match start</td>
</tr>
<tr class="odd">
<td align="left"><code>ilike$</code></td>
<td align="left"><code>%.like$%</code></td>
<td align="left">Case insensitive string, match end</td>
</tr>
<tr class="even">
<td align="left"><code>!ilike$</code></td>
<td align="left"><code>%.~like$%</code></td>
<td align="left">Case insensitive string, not match end</td>
</tr>
<tr class="odd">
<td align="left"><code>gt</code></td>
<td align="left"><code>%.gt%</code></td>
<td align="left">Greater than</td>
</tr>
<tr class="even">
<td align="left"><code>ge</code></td>
<td align="left"><code>%.ge%</code></td>
<td align="left">Greater than or equal</td>
</tr>
<tr class="odd">
<td align="left"><code>lt</code></td>
<td align="left"><code>%.lt%</code></td>
<td align="left">Less than</td>
</tr>
<tr class="even">
<td align="left"><code>le</code></td>
<td align="left"><code>%.le%</code></td>
<td align="left">Less than or equal</td>
</tr>
<tr class="odd">
<td align="left"><code>token</code></td>
<td align="left"><code>%.token%</code></td>
<td align="left">Match on multiple tokens in search property</td>
</tr>
<tr class="even">
<td align="left"><code>!token</code></td>
<td align="left"><code>%.~token%</code></td>
<td align="left">Not match on multiple tokens in search property</td>
</tr>
<tr class="odd">
<td align="left"><code>in</code></td>
<td align="left"><code>%.in%</code></td>
<td align="left">Find objects matching 1 or more values</td>
</tr>
<tr class="even">
<td align="left"><code>!in</code></td>
<td align="left"><code>%.~in%</code></td>
<td align="left">Find objects not matching 1 or more values</td>
</tr>
</tbody>
</table>
</div>
<div id="working-with-metadata-filters" class="section level3">
<h3>Working with metadata filters</h3>
<p>Basic usage of the metadata filter</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co"># Retrieve organisation units by county (level 2)</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>county <span class="ot">&lt;-</span> <span class="fu">get_organisation_units</span>(level <span class="sc">%.eq%</span> <span class="st">&#39;2&#39;</span>)</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>county</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="co">#&gt; # A tibble: 47 × 2</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="co">#&gt;    name                   id         </span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;                  &lt;chr&gt;      </span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="co">#&gt;  1 Baringo County         vvOK1BxTbet</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="co">#&gt;  2 Bomet County           HMNARUV2CW4</span></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a><span class="co">#&gt;  3 Bungoma County         KGHhQ5GLd4k</span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a><span class="co">#&gt;  4 Busia County           Tvf1zgVZ0K4</span></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a><span class="co">#&gt;  5 Elgeyo Marakwet County MqnLxQBigG0</span></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a><span class="co">#&gt;  6 Embu County            PFu8alU2KWG</span></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a><span class="co">#&gt;  7 Garissa County         uyOrcHZBpW0</span></span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a><span class="co">#&gt;  8 Homa Bay County        nK0A12Q7MvS</span></span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a><span class="co">#&gt;  9 Isiolo County          bzOfj0iwfDH</span></span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a><span class="co">#&gt; 10 Kajiado County         Hsk1YV8kHkT</span></span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a><span class="co">#&gt; # ℹ 37 more rows</span></span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a></span>
<span id="cb2-19"><a href="#cb2-19" tabindex="-1"></a><span class="co"># Retrieve county by name (Mombasa)</span></span>
<span id="cb2-20"><a href="#cb2-20" tabindex="-1"></a>county <span class="ot">&lt;-</span> <span class="fu">get_organisation_units</span>(level <span class="sc">%.eq%</span> <span class="st">&#39;2&#39;</span>,</span>
<span id="cb2-21"><a href="#cb2-21" tabindex="-1"></a>                                 name <span class="sc">%.like%</span> <span class="st">&#39;mombasa&#39;</span>)</span>
<span id="cb2-22"><a href="#cb2-22" tabindex="-1"></a>county</span>
<span id="cb2-23"><a href="#cb2-23" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 2</span></span>
<span id="cb2-24"><a href="#cb2-24" tabindex="-1"></a><span class="co">#&gt;   name           id         </span></span>
<span id="cb2-25"><a href="#cb2-25" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;          &lt;chr&gt;      </span></span>
<span id="cb2-26"><a href="#cb2-26" tabindex="-1"></a><span class="co">#&gt; 1 Mombasa County wsBsC6gjHvn</span></span>
<span id="cb2-27"><a href="#cb2-27" tabindex="-1"></a></span>
<span id="cb2-28"><a href="#cb2-28" tabindex="-1"></a>data_element_id <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;cXe64Yk0QMY&#39;</span>, <span class="st">&#39;XEX93uLsAm2&#39;</span>)</span>
<span id="cb2-29"><a href="#cb2-29" tabindex="-1"></a></span>
<span id="cb2-30"><a href="#cb2-30" tabindex="-1"></a><span class="co"># Retrieve data elements by ID using operator in</span></span>
<span id="cb2-31"><a href="#cb2-31" tabindex="-1"></a>data_elements <span class="ot">&lt;-</span> <span class="fu">get_data_elements</span>(id <span class="sc">%.in%</span> data_element_id)</span>
<span id="cb2-32"><a href="#cb2-32" tabindex="-1"></a>data_elements</span>
<span id="cb2-33"><a href="#cb2-33" tabindex="-1"></a><span class="co">#&gt; # A tibble: 2 × 2</span></span>
<span id="cb2-34"><a href="#cb2-34" tabindex="-1"></a><span class="co">#&gt;   name         id         </span></span>
<span id="cb2-35"><a href="#cb2-35" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;        &lt;chr&gt;      </span></span>
<span id="cb2-36"><a href="#cb2-36" tabindex="-1"></a><span class="co">#&gt; 1 CBE-Abnormal XEX93uLsAm2</span></span>
<span id="cb2-37"><a href="#cb2-37" tabindex="-1"></a><span class="co">#&gt; 2 CBE-Normal   cXe64Yk0QMY</span></span>
<span id="cb2-38"><a href="#cb2-38" tabindex="-1"></a></span>
<span id="cb2-39"><a href="#cb2-39" tabindex="-1"></a><span class="co"># Retrieve data elements by filtering using dataElementGroups</span></span>
<span id="cb2-40"><a href="#cb2-40" tabindex="-1"></a>data_elements <span class="ot">&lt;-</span> <span class="fu">get_data_elements</span>(dataElementGroups.name <span class="sc">%.like%</span> <span class="st">&#39;moh 705&#39;</span>)</span>
<span id="cb2-41"><a href="#cb2-41" tabindex="-1"></a>data_elements</span>
<span id="cb2-42"><a href="#cb2-42" tabindex="-1"></a><span class="co">#&gt; # A tibble: 96 × 2</span></span>
<span id="cb2-43"><a href="#cb2-43" tabindex="-1"></a><span class="co">#&gt;    name                         id         </span></span>
<span id="cb2-44"><a href="#cb2-44" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;                        &lt;chr&gt;      </span></span>
<span id="cb2-45"><a href="#cb2-45" tabindex="-1"></a><span class="co">#&gt;  1 Abortion                     IrWSgk9GsUm</span></span>
<span id="cb2-46"><a href="#cb2-46" tabindex="-1"></a><span class="co">#&gt;  2 All other diseases           KxT47tbKHsd</span></span>
<span id="cb2-47"><a href="#cb2-47" tabindex="-1"></a><span class="co">#&gt;  3 Anaemia cases                kkUHOwGMawD</span></span>
<span id="cb2-48"><a href="#cb2-48" tabindex="-1"></a><span class="co">#&gt;  4 Arthritis, Joint pains etc.  waNhWrS3HL6</span></span>
<span id="cb2-49"><a href="#cb2-49" tabindex="-1"></a><span class="co">#&gt;  5 Asthma                       L82lvvxVaqt</span></span>
<span id="cb2-50"><a href="#cb2-50" tabindex="-1"></a><span class="co">#&gt;  6 Autism                       L529r3Wvtcf</span></span>
<span id="cb2-51"><a href="#cb2-51" tabindex="-1"></a><span class="co">#&gt;  7 Bilharzia  (Schistosomiasis) ojFSHMwbkHK</span></span>
<span id="cb2-52"><a href="#cb2-52" tabindex="-1"></a><span class="co">#&gt;  8 Brucellosis                  nb9cfWgxYFc</span></span>
<span id="cb2-53"><a href="#cb2-53" tabindex="-1"></a><span class="co">#&gt;  9 Burns                        dkEYL9Sous9</span></span>
<span id="cb2-54"><a href="#cb2-54" tabindex="-1"></a><span class="co">#&gt; 10 Cardiovascular conditions    sZETzNe1To8</span></span>
<span id="cb2-55"><a href="#cb2-55" tabindex="-1"></a><span class="co">#&gt; # ℹ 86 more rows</span></span></code></pre></div>
</div>
</div>
<div id="data-analytics" class="section level2">
<h2>Data analytics</h2>
<p>The analytics resource in DHIS2 empowers you to access and analyze
aggregated data across various dimensions. To effectively leverage this
resource, let’s explore the key functions and parameters involved:</p>
<div id="key-functions" class="section level3">
<h3>Key Functions</h3>
<ul>
<li><code>get_analytics()</code>: Retrieves aggregated data based on
specified dimensions and filters.</li>
<li><code>analytics_dimension()</code>: Constructs dimensions for
queries, ensuring accurate data retrieval.</li>
<li><code>%.d%</code> (infix operator): Convenient shorthand for
creating dimension filters.</li>
<li><code>%.f%</code> (infix operator): Convenient shorthand for
creating filter dimensions.</li>
</ul>
</div>
<div id="dimension-dx" class="section level3">
<h3>Dimension (dx)</h3>
<p>The <code>dimension</code> query parameter defines which dimensions
should be included in the analytics query. Any number of dimensions can
be specified. The dimension parameter should be repeated for each
dimension to include in the query response. The query response can
potentially contain aggregated values for all combinations of the
specified dimension items. The fixed dimensions are the <strong>data
element</strong> <em>(dx)</em> <strong>period (time)</strong>
<em>(pe)</em> and <strong>organisation unit</strong> <em>(ou)</em>
dimension. You can dynamically add dimensions through categories, data
element group sets and organisation unit group sets.</p>
<table>
<colgroup>
<col width="17%" />
<col width="82%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Dimension ID</th>
<th align="left">Dimensions</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">dx</td>
<td align="left">Data elements, indicators, data set reporting rate
metrics,</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">data element operands, program indicators, program data
elements,</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">program attributes, validation rules</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">pe</td>
<td align="left">ISO periods and relative periods (see “date and period
format”)</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">ou</td>
<td align="left">Organisation unit hierarchy</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Organisation unit identifiers, keywords
USER_ORGUNIT,</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">USER_ORGUNIT_CHILDREN, USER_ORGUNIT_GRANDCHILDREN,
LEVEL-<level>,</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">and OU_GROUP-<group-id></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">co</td>
<td align="left">Category option combo identifiers (use <code>all</code>
to get all items)</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">ao</td>
<td align="left">Category option combo identifiers (use <code>all</code>
to get all items)</td>
</tr>
</tbody>
</table>
</div>
<div id="filter-filter" class="section level3">
<h3>Filter (filter)</h3>
<p>The <code>filter</code> parameter defines which dimensions should be
used as filters for the data retrieved in the analytics query. Any
number of filters can be specified. The filter parameter should be
repeated for each filter to use in the query. A filter differs from a
dimension in that the filter dimensions will not be part of the query
response content, and that the aggregated values in the response will be
collapsed on the filter dimensions. In other words, the data in the
response will be aggregated on the filter dimensions, but the filters
will not be included as dimensions in the actual response.</p>
</div>
<div id="constructing-queries" class="section level3">
<h3>Constructing Queries</h3>
<ul>
<li><strong>Specify Dimensions:</strong> Use the dimensions parameter to
define the dimensions you want to include in the query response.
Leverage the infix operators %.d% for concise and readable code.</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="co"># To include a list dimensions for data elements id, dataset ids</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>dx <span class="sc">%.d%</span> <span class="fu">c</span>(<span class="st">&#39;dimension-id-1&#39;</span>, <span class="st">&#39;dimension-id-2&#39;</span>)</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="co">#&gt; &lt;spliced&gt;</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="co">#&gt; $dimension</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="co">#&gt; [1] &quot;dx:dimension-id-1;dimension-id-2&quot;</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>pe <span class="sc">%.d%</span> <span class="st">&#39;LAST_YEAR&#39;</span></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="co">#&gt; &lt;spliced&gt;</span></span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a><span class="co">#&gt; $dimension</span></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a><span class="co">#&gt; [1] &quot;pe:LAST_YEAR&quot;</span></span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a></span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a>ou <span class="sc">%.d%</span> <span class="st">&#39;USER_ORGUNIT&#39;</span></span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a><span class="co">#&gt; &lt;spliced&gt;</span></span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a><span class="co">#&gt; $dimension</span></span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a><span class="co">#&gt; [1] &quot;ou:USER_ORGUNIT&quot;</span></span>
<span id="cb3-16"><a href="#cb3-16" tabindex="-1"></a></span>
<span id="cb3-17"><a href="#cb3-17" tabindex="-1"></a><span class="co"># showing in the analytics</span></span>
<span id="cb3-18"><a href="#cb3-18" tabindex="-1"></a><span class="fu">get_analytics</span>(</span>
<span id="cb3-19"><a href="#cb3-19" tabindex="-1"></a>    dx <span class="sc">%.d%</span> <span class="fu">c</span>(<span class="st">&#39;siOyOiOJpI8&#39;</span>, <span class="st">&#39;Lt0FqtnHraW&#39;</span>, <span class="st">&#39;OoakJhWiyZp&#39;</span>),</span>
<span id="cb3-20"><a href="#cb3-20" tabindex="-1"></a>    pe <span class="sc">%.d%</span> <span class="st">&#39;LAST_YEAR&#39;</span>,</span>
<span id="cb3-21"><a href="#cb3-21" tabindex="-1"></a>    ou <span class="sc">%.d%</span> <span class="fu">c</span>(<span class="st">&#39;qKzosKQPl6G&#39;</span>)</span>
<span id="cb3-22"><a href="#cb3-22" tabindex="-1"></a>)</span>
<span id="cb3-23"><a href="#cb3-23" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3 × 4</span></span>
<span id="cb3-24"><a href="#cb3-24" tabindex="-1"></a><span class="co">#&gt;   dx          pe    ou          value</span></span>
<span id="cb3-25"><a href="#cb3-25" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;       &lt;dbl&gt;</span></span>
<span id="cb3-26"><a href="#cb3-26" tabindex="-1"></a><span class="co">#&gt; 1 OoakJhWiyZp 2023  qKzosKQPl6G  5005</span></span>
<span id="cb3-27"><a href="#cb3-27" tabindex="-1"></a><span class="co">#&gt; 2 Lt0FqtnHraW 2023  qKzosKQPl6G 30915</span></span>
<span id="cb3-28"><a href="#cb3-28" tabindex="-1"></a><span class="co">#&gt; 3 siOyOiOJpI8 2023  qKzosKQPl6G 20443</span></span>
<span id="cb3-29"><a href="#cb3-29" tabindex="-1"></a></span>
<span id="cb3-30"><a href="#cb3-30" tabindex="-1"></a><span class="co"># Using the startDate and endDate with organisation unit keyword &#39;USER_ORGUNIT&#39;</span></span>
<span id="cb3-31"><a href="#cb3-31" tabindex="-1"></a><span class="fu">get_analytics</span>(</span>
<span id="cb3-32"><a href="#cb3-32" tabindex="-1"></a>    dx <span class="sc">%.d%</span> <span class="fu">c</span>(<span class="st">&#39;siOyOiOJpI8&#39;</span>, <span class="st">&#39;Lt0FqtnHraW&#39;</span>, <span class="st">&#39;OoakJhWiyZp&#39;</span>),</span>
<span id="cb3-33"><a href="#cb3-33" tabindex="-1"></a>    ou <span class="sc">%.d%</span> <span class="st">&#39;USER_ORGUNIT&#39;</span>,</span>
<span id="cb3-34"><a href="#cb3-34" tabindex="-1"></a>    pe <span class="sc">%.d%</span> <span class="st">&#39;all&#39;</span>,</span>
<span id="cb3-35"><a href="#cb3-35" tabindex="-1"></a>    <span class="at">startDate =</span> <span class="st">&#39;2023-07-01&#39;</span>,</span>
<span id="cb3-36"><a href="#cb3-36" tabindex="-1"></a>    <span class="at">endDate =</span> <span class="st">&#39;2023-12-31&#39;</span></span>
<span id="cb3-37"><a href="#cb3-37" tabindex="-1"></a>)</span>
<span id="cb3-38"><a href="#cb3-38" tabindex="-1"></a><span class="co">#&gt; # A tibble: 18 × 4</span></span>
<span id="cb3-39"><a href="#cb3-39" tabindex="-1"></a><span class="co">#&gt;    dx          ou          pe       value</span></span>
<span id="cb3-40"><a href="#cb3-40" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt;    &lt;dbl&gt;</span></span>
<span id="cb3-41"><a href="#cb3-41" tabindex="-1"></a><span class="co">#&gt;  1 siOyOiOJpI8 HfVjCurKxh2 202310  749762</span></span>
<span id="cb3-42"><a href="#cb3-42" tabindex="-1"></a><span class="co">#&gt;  2 siOyOiOJpI8 HfVjCurKxh2 202312  639070</span></span>
<span id="cb3-43"><a href="#cb3-43" tabindex="-1"></a><span class="co">#&gt;  3 Lt0FqtnHraW HfVjCurKxh2 202307 1122218</span></span>
<span id="cb3-44"><a href="#cb3-44" tabindex="-1"></a><span class="co">#&gt;  4 OoakJhWiyZp HfVjCurKxh2 202308  367715</span></span>
<span id="cb3-45"><a href="#cb3-45" tabindex="-1"></a><span class="co">#&gt;  5 siOyOiOJpI8 HfVjCurKxh2 202311  663303</span></span>
<span id="cb3-46"><a href="#cb3-46" tabindex="-1"></a><span class="co">#&gt;  6 Lt0FqtnHraW HfVjCurKxh2 202308  957571</span></span>
<span id="cb3-47"><a href="#cb3-47" tabindex="-1"></a><span class="co">#&gt;  7 OoakJhWiyZp HfVjCurKxh2 202307  432306</span></span>
<span id="cb3-48"><a href="#cb3-48" tabindex="-1"></a><span class="co">#&gt;  8 Lt0FqtnHraW HfVjCurKxh2 202312  761097</span></span>
<span id="cb3-49"><a href="#cb3-49" tabindex="-1"></a><span class="co">#&gt;  9 OoakJhWiyZp HfVjCurKxh2 202312  294397</span></span>
<span id="cb3-50"><a href="#cb3-50" tabindex="-1"></a><span class="co">#&gt; 10 Lt0FqtnHraW HfVjCurKxh2 202310  839071</span></span>
<span id="cb3-51"><a href="#cb3-51" tabindex="-1"></a><span class="co">#&gt; 11 Lt0FqtnHraW HfVjCurKxh2 202311  802956</span></span>
<span id="cb3-52"><a href="#cb3-52" tabindex="-1"></a><span class="co">#&gt; 12 OoakJhWiyZp HfVjCurKxh2 202309  329947</span></span>
<span id="cb3-53"><a href="#cb3-53" tabindex="-1"></a><span class="co">#&gt; 13 siOyOiOJpI8 HfVjCurKxh2 202307  995079</span></span>
<span id="cb3-54"><a href="#cb3-54" tabindex="-1"></a><span class="co">#&gt; 14 siOyOiOJpI8 HfVjCurKxh2 202309  842549</span></span>
<span id="cb3-55"><a href="#cb3-55" tabindex="-1"></a><span class="co">#&gt; 15 OoakJhWiyZp HfVjCurKxh2 202311  260530</span></span>
<span id="cb3-56"><a href="#cb3-56" tabindex="-1"></a><span class="co">#&gt; 16 siOyOiOJpI8 HfVjCurKxh2 202308  855432</span></span>
<span id="cb3-57"><a href="#cb3-57" tabindex="-1"></a><span class="co">#&gt; 17 OoakJhWiyZp HfVjCurKxh2 202310  257524</span></span>
<span id="cb3-58"><a href="#cb3-58" tabindex="-1"></a><span class="co">#&gt; 18 Lt0FqtnHraW HfVjCurKxh2 202309  941409</span></span></code></pre></div>
<ul>
<li><strong>Apply Filters:</strong> Use the filters parameter to specify
dimensions for filtering data without including them in the
response.</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co"># Filter by period</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>pe <span class="sc">%.f%</span> <span class="st">&#39;LAST_YEAR&#39;</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="co">#&gt; &lt;spliced&gt;</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="co">#&gt; $filter</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="co">#&gt; [1] &quot;pe:LAST_YEAR&quot;</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a><span class="co"># Filter by organisation unit</span></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a>ou <span class="sc">%.f%</span> <span class="st">&#39;USER_ORGUNIT&#39;</span></span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a><span class="co">#&gt; &lt;spliced&gt;</span></span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a><span class="co">#&gt; $filter</span></span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a><span class="co">#&gt; [1] &quot;ou:USER_ORGUNIT&quot;</span></span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a></span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a><span class="co"># showing in the analytics. filter by organisation unit with id &#39;qKzosKQPl6G&#39;</span></span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a><span class="co"># and period &#39;LAST_YEAR&#39;</span></span>
<span id="cb4-15"><a href="#cb4-15" tabindex="-1"></a><span class="fu">get_analytics</span>(</span>
<span id="cb4-16"><a href="#cb4-16" tabindex="-1"></a>    dx <span class="sc">%.d%</span> <span class="fu">c</span>(<span class="st">&#39;siOyOiOJpI8&#39;</span>, <span class="st">&#39;Lt0FqtnHraW&#39;</span>, <span class="st">&#39;OoakJhWiyZp&#39;</span>),</span>
<span id="cb4-17"><a href="#cb4-17" tabindex="-1"></a>    pe <span class="sc">%.f%</span> <span class="st">&#39;LAST_YEAR&#39;</span>,</span>
<span id="cb4-18"><a href="#cb4-18" tabindex="-1"></a>    ou <span class="sc">%.f%</span> <span class="st">&#39;qKzosKQPl6G&#39;</span></span>
<span id="cb4-19"><a href="#cb4-19" tabindex="-1"></a>)</span>
<span id="cb4-20"><a href="#cb4-20" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3 × 2</span></span>
<span id="cb4-21"><a href="#cb4-21" tabindex="-1"></a><span class="co">#&gt;   dx          value</span></span>
<span id="cb4-22"><a href="#cb4-22" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;       &lt;dbl&gt;</span></span>
<span id="cb4-23"><a href="#cb4-23" tabindex="-1"></a><span class="co">#&gt; 1 OoakJhWiyZp  5005</span></span>
<span id="cb4-24"><a href="#cb4-24" tabindex="-1"></a><span class="co">#&gt; 2 siOyOiOJpI8 20443</span></span>
<span id="cb4-25"><a href="#cb4-25" tabindex="-1"></a><span class="co">#&gt; 3 Lt0FqtnHraW 30915</span></span></code></pre></div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
